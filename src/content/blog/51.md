---
title: 'Jetpack Composeã§å†åˆ©ç”¨å¯èƒ½ãªã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’å®Ÿç¾ã™ã‚‹ãŸã‚ã«'
description: 'Jetpack Composeã®å¤§ããªç‰¹å¾´ã¨ã—ã¦ã€å†åˆ©ç”¨å¯èƒ½ãªã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’ä½œã‚Šã‚„ã™ããªã£ãŸã“ã¨ãŒã‚ã‚‹ã§ã—ã‚‡ã†ã€‚\nç´°ã‹ã„å˜ä½ã§Composableé–¢æ•°ã«åˆ‡ã‚Šå‡ºã™ã“ã¨ã§ã€åŒã˜UIã‚’å…±é€šåŒ–ã§ãã‚‹ã ã‘ã§ãªãã€ä»Šå¾Œã®ä»•æ§˜è¿½åŠ /å¤‰æ›´ã®éš›ã«ã‚‚ã‚¹ãƒ ãƒ¼ã‚ºã«ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’å†åˆ©ç”¨ã§ãã‚‹ã§ã—ã‚‡ã†ã€‚\nä¸€æ–¹ã§ã€å†åˆ©ç”¨å¯èƒ½ãªã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®å®Ÿç¾ã«ã¯ã„ãã¤ã‹æ³¨æ„ã™ã¹ãç‚¹ãŒã‚ã‚Šã¾ã™ã€‚ ä»Šå›ã¯å…¬å¼ã‹ã‚‰è¿°ã¹ã‚‰ã‚Œã¦ã„ã‚‹æ³¨æ„äº‹é …ã‚„ã€è‡ªåˆ†ãŒæ›¸ã„ã¦ã„ã¦æ³¨æ„ã—ã¦ã„ã‚‹ã“ã¨ã«ã¤ã„ã¦ç´¹ä»‹ã—ã¾ã™ã€‚'
pubDate: '2022-02-20T00:00:00.000Z'
ogpImage: 'https://cdn.at-sushi.work/temp/2022-02-20-ogp.png'
---

Jetpack Composeã®å¤§ããªç‰¹å¾´ã¨ã—ã¦ã€å†åˆ©ç”¨å¯èƒ½ãªã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’ä½œã‚Šã‚„ã™ããªã£ãŸã“ã¨ãŒã‚ã‚‹ã§ã—ã‚‡ã†ã€‚

ç´°ã‹ã„å˜ä½ã§Composableé–¢æ•°ã«åˆ‡ã‚Šå‡ºã™ã“ã¨ã§ã€åŒã˜UIã‚’å…±é€šåŒ–ã§ãã‚‹ã ã‘ã§ãªãã€ä»Šå¾Œã®ä»•æ§˜è¿½åŠ /å¤‰æ›´ã®éš›ã«ã‚‚ã‚¹ãƒ ãƒ¼ã‚ºã«ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’å†åˆ©ç”¨ã§ãã‚‹ã§ã—ã‚‡ã†ã€‚

ä¸€æ–¹ã§ã€å†åˆ©ç”¨å¯èƒ½ãªã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®å®Ÿç¾ã«ã¯ã„ãã¤ã‹æ³¨æ„ã™ã¹ãç‚¹ãŒã‚ã‚Šã¾ã™ã€‚
ä»Šå›ã¯å…¬å¼ã‹ã‚‰è¿°ã¹ã‚‰ã‚Œã¦ã„ã‚‹æ³¨æ„äº‹é …ã‚„ã€è‡ªåˆ†ãŒæ›¸ã„ã¦ã„ã¦æ³¨æ„ã—ã¦ã„ã‚‹ã“ã¨ã«ã¤ã„ã¦ç´¹ä»‹ã—ã¾ã™ã€‚

## ãã®å‰ã«ï¼šå†åˆ©ç”¨ã—ãªã„é¸æŠè‚¢
å†åˆ©ç”¨ã®è©±ã«å…¥ã‚‹å‰ã«ã€å†åˆ©ç”¨ã—ãªã„é¸æŠè‚¢ã«ã¤ã„ã¦æ›¸ã‹ã›ã¦ãã ã•ã„ã€‚

åŒã˜ã‚³ãƒ¼ãƒ‰ã‚’ä½•åº¦ã‚‚å†åˆ©ç”¨ã™ã‚‹ã“ã¨ãŒã§ãã‚Œã°ã€å¤‰æ›´æ™‚ã«ä¸€ç®‡æ‰€ã ã‘å¤‰æ›´ã™ã‚Œã°è‰¯ããªã‚Šã¾ã™ã—ã€ä½•ã‚ˆã‚Šæ¥½ã§ã™ã€‚
ä¸€æ–¹ã§ã€å…±é€šåŒ–ã™ã‚‹ã“ã¨ã«ã‚ˆã‚ŠäºˆæœŸã—ã¦ã„ãªã‹ã£ãŸå•é¡ŒãŒç™ºç”Ÿã™ã‚‹ã“ã¨ã¯ã‚ˆãã‚ã‚Šã¾ã™ã€‚

ä¸€èˆ¬çš„ã«UIã®å¤‰æ›´ã¯å¤šãã€ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®åˆ‡ã‚Šå‡ºã—ã®é›£æ˜“åº¦ã¯é«˜ã„ã§ã™ã€‚
ã¨ã‚Šã‚ãˆãšå…±é€šåŒ–ã—ã¦ãŠã„ãŸã‚‚ã®ã«ã€ãã‚Œãã‚Œåˆ¥ã®å¯¾å¿œãŒå¿…è¦ã«ãªã‚Šã€ã„ã¤ã®é–“ã«ã‹ä¸€ã¤ã®ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆãŒè‚¥å¤§åŒ–ã—ã¦ã„ã‚‹ã“ã¨ã¯ãªã„ã§ã—ã‚‡ã†ã‹ã€‚

Jetpack Composeã®å ´åˆã§ã‚ã£ã¦ã‚‚ã€1ã¤ã®é–¢æ•°å†…ã«å¤§é‡ã®`when`ã‚„`if`ãŒå­˜åœ¨ã™ã‚‹å ´åˆã€ãã‚Œã¯è²¬å‹™ã‚’æŒã¡ã™ãã¦ã„ã‚‹å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™ã€‚
ä¸€è¦‹ä¼¼ã¦ã„ã‚‹ã‚‚ã®ã§ã‚ã£ã¦ã‚‚ã€ãã‚ŒãŒä¸€æ™‚çš„ãªã‚‚ã®ã§ã‚ã£ãŸã‚Šã€ç•°ãªã‚‹ç›®çš„ãŒå­˜åœ¨ã™ã‚‹å ´åˆã«ã¯ã€åˆ†ã‘ã¦æ‰±ã£ãŸã»ã†ãŒè‰¯ã„ã§ã—ã‚‡ã†ã€‚

å‡é›†åº¦ã‚’æ„è­˜ã—ãªãŒã‚‰ã‚³ãƒ¼ãƒ‰ã‚’æ›¸ãã“ã¨ã¯ã€Jetpack Composeã§ã‚‚éå¸¸ã«é‡è¦ã§ã™ã€‚

å‡é›†åº¦ç­‰ã®è©³ã—ã„èª¬æ˜ã¯ä»¥å‰ã“ã¡ã‚‰ã§æ›¸ã„ã¦ã„ã¾ã™ã€‚

* [è‰¯ã„ã‚³ãƒ¼ãƒ‰ã¨ã¯ä½•ã‹ - ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢æ–°å’ç ”ä¿® ã‚¹ãƒ©ã‚¤ãƒ‰å…¬é–‹ï½œCyberZ CTOå®¤ï½œnote](https://note.com/cyberz_cto/n/n26f535d6c575)

## 1. ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã«ãƒãƒ¼ã‚¸ãƒ³ã‚„ã‚µã‚¤ã‚ºã‚’æŒãŸã›ãªã„
Reactç­‰ã®å®£è¨€çš„UIã§ã‚ˆãè¨€ã‚ã‚Œã¦ã„ã‚‹ã“ã¨ã§ã™ãŒã€ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆå†…ã§ãƒãƒ¼ã‚¸ãƒ³ã‚„ã‚µã‚¤ã‚ºã‚’æ±ºã‚ã‚‹ã®ã§ã¯ãªãã€å¤–ã‹ã‚‰è¨­å®šã§ãã‚‹ã‚ˆã†ã«ã™ã‚‹ã“ã¨ã§ã€æ±ç”¨çš„ã«æ‰±ã†ã“ã¨ãŒã§ãã¾ã™ã€‚

Jetpack Composeã§ã¯ã€`Modifier`ã‚’å¼•æ•°ã¨ã—ã¦å—ã‘ä»˜ã‘ã‚‹ã‚ˆã†ã«ã—ã¾ã—ã‚‡ã†ã€‚
æ¸¡ã—ãŸ`Modifier`ã¯ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆå†…ã®ä¸€ç•ªå¤–å´ã«ã‚ãŸã™ã‚ˆã†ã«æ°—ã‚’ã¤ã‘ã¦ãã ã•ã„ã€‚

`Modifier`ã¯æœ€åˆã®ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå¼•æ•°ã‚’æŒã¤å¼•æ•°ã¨ã—ã¦ã€`modifier`ã¨ã„ã†åå‰ã§å®šç¾©ã™ã‚‹ã®ãŒæ¨å¥¨ã•ã‚Œã¦ã„ã‚‹ã‚ˆã†ã§ã™ã€‚[å‚è€ƒ](https://github.com/androidx/androidx/blob/androidx-main/compose/docs/compose-api-guidelines.md#elements-accept-and-respect-a-modifier-parameter)

#### DO ğŸ‘Œ
```kotlin
@Composable
fun Sample(
    text: String,
    modifier: Modifier = Modifier
) {
    Box(
        modifier = modifier
    ) {
        Text(text = text)
    }
}
```

#### Donâ€™t âŒ
```kotlin
@Composable
fun Sample(
    text: String
) {
    Box(
        modifier = Modifier
            .width(320.dp)
            .padding(16.dp)
    ) {
        Text(text = text)
    }
}
```

## 2. ãƒ‘ãƒ‡ã‚£ãƒ³ã‚°ã¯ `PaddingValues` ã§æ¸¡ã™
1ç•ªã‚’å®Ÿè·µã—ã¦ã„ãã¨ã€èƒŒæ™¯ãŒã‚ã‚‹ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚„ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«å¯èƒ½ãªã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®ãƒ‘ãƒ‡ã‚£ãƒ³ã‚°ã¯ã€`Modifier`ã ã‘ã§ã¯åˆ¶å¾¡ã§ããªã„ã“ã¨ãŒã‚ã‹ã‚Šã¾ã™ã€‚

`Modifier`ã¯é †ç•ªãŒå¤§äº‹ã§ã€èƒŒæ™¯(`background`)ãŒã‚ã‚‹å ´åˆã€èƒŒæ™¯ã‚ˆã‚Šå‰ã«è¨­å®šã—ãŸ`padding`ã¯ã„ã‚ã‚†ã‚‹ãƒãƒ¼ã‚¸ãƒ³ã¨ã—ã¦æ‰±ã‚ã‚Œã€èƒŒæ™¯ã®å¾Œã«è¨­å®šã—ãŸ`padding`ã¯ã„ã‚ã‚†ã‚‹ãƒ‘ãƒ‡ã‚£ãƒ³ã‚°ã¨ã—ã¦æ‰±ã‚ã‚Œã¾ã™ã€‚

```kotlin
Modifier
    .padding(16.dp) // ã„ã‚ã‚†ã‚‹ãƒãƒ¼ã‚¸ãƒ³
    .background(Color.Red)
    .padding(16.dp) // ã„ã‚ã‚†ã‚‹ãƒ‘ãƒ‡ã‚£ãƒ³ã‚°
```

èƒŒæ™¯è‰²ç­‰ã¯ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆå†…ã§æ±ºã‚ã¤ã¤ã€èƒŒæ™¯ã®å†…å´ã®ãƒ‘ãƒ‡ã‚£ãƒ³ã‚°ã‚’å¤–å´ã‹ã‚‰æ“ä½œã—ãŸã„å ´åˆã€[PaddingValues](https://developer.android.com/reference/kotlin/androidx/compose/foundation/layout/PaddingValues) ã‚’åˆ¥é€”æ¸¡ã—ã¦ã‚ã’ã‚‹ã®ãŒè‰¯ã„ã§ã—ã‚‡ã†ã€‚

```kotlin
@Composable
fun Sample(
    text: String,
    modifier: Modifier = Modifier,
    contentPadding: PaddingValues = PaddingValues(0.dp)
) {
    Box(
        modifier = modifier
            .background(Color.Red)
            .padding(contentPadding)
    ) {
        Text(text = text)
    }
}
```

ã“ã‚Œã¯[LazyColumn](https://developer.android.com/reference/kotlin/androidx/compose/foundation/lazy/package-summary?hl=ja#LazyColumn(androidx.compose.ui.Modifier,androidx.compose.foundation.lazy.LazyListState,androidx.compose.foundation.layout.PaddingValues,kotlin.Boolean,androidx.compose.foundation.layout.Arrangement.Vertical,androidx.compose.ui.Alignment.Horizontal,androidx.compose.foundation.gestures.FlingBehavior,kotlin.Boolean,kotlin.Function1))ç­‰ã§ã‚‚ä½¿ã‚ã‚Œã¦ã„ã‚‹æ–¹æ³•ã«ãªã‚Šã¾ã™ã€‚

```kotlin
@Composable
fun LazyColumn(
    modifier: Modifier = Modifier,
    state: LazyListState = rememberLazyListState(),
    contentPadding: PaddingValues = PaddingValues(0.dp),
...
```

## 3. å¼•æ•°ã«å‡ºæ¥ã‚‹é™ã‚Š`Composable`ã‚’æ¸¡ã™
ãƒœã‚¿ãƒ³ã®ãƒ©ãƒ™ãƒ«ç­‰ã€ä½•ã‹ã‚’è¡¨ç¤ºã—ãŸã„å ´åˆã«ã€ã§ãã‚‹ã ã‘å¼•æ•°ã‚’`String`ãªã©ã®å®Ÿæ…‹ã§ã¯ãªãã€`Composable`ã‚’æ¸¡ã™ã‚ˆã†ã«ã—ã¦ãŠãã¨ã€æ±ç”¨çš„ã«åˆ©ç”¨ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚

ä¾‹ãˆã°ã€ä»¥ä¸‹ã®ãƒœã‚¿ãƒ³ã®ä¾‹ã ã¨ã€ä¸€éƒ¨ã®åˆ©ç”¨ç®‡æ‰€ã§ã®ã¿æ–‡å­—è‰²ã‚’å¤‰ãˆãŸã‚Šã€ã‚¢ã‚¤ã‚³ãƒ³ä»˜ãã®ãƒœã‚¿ãƒ³ã«ã™ã‚‹ã“ã¨ãŒå®¹æ˜“ã«ãªã‚Šã¾ã™ã€‚

#### DO ğŸ‘Œ
```kotlin
@Composable
fun SampleButton(
    onClick: () -> Unit,
    modifier: Modifier = Modifier,
    content: @Composable () -> Unit
) {
    Box(
        modifier = modifier.clickable(onClick = onClick)
    ) {
        content()
    }
}
```

#### Donâ€™t âŒ
```kotlin
@Composable
fun SampleButton(
    text: String,
    onClick: () -> Unit,
    modifier: Modifier = Modifier
) {
    Box(
        modifier = modifier.clickable(onClick = onClick)
    ) {
        Text(text = text)
    }
}
```

### `LocalContentColor`ã‚„`ProvideTextStyle`ã§å­Composableã‚’åˆ¶å¾¡ã™ã‚‹

`Composable` ã‚’æ¸¡ã™ã‚ˆã†ã«ã—ã¦ã„ãã¨ã€ä»Šåº¦ã¯åˆ©ç”¨å´ã®ã‚³ãƒ¼ãƒ‰ãŒå¤šãæ›¸ã‹ãªã„ã¨ã„ã‘ãªããªã‚Šã€ã¾ãŸå ´åˆã«ã‚ˆã£ã¦ãã‚Œã‚‰ãŒé‡è¤‡ã—ã¦ã„ã‚‹ã‚±ãƒ¼ã‚¹ã‚‚å‡ºã¦ãã‚‹ã§ã—ã‚‡ã†ã€‚

[CompositionLocal](https://developer.android.com/reference/kotlin/androidx/compose/runtime/CompositionLocal)ã‚’ä½¿ã†ã“ã¨ã§ã€ãã‚Œã‚‰ã‚’ç·©å’Œã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚ä¾‹ãˆã°ã€æ–‡å­—è‰²ã‚„ã‚¢ã‚¤ã‚³ãƒ³è‰²ç­‰ã¯ `LocalContentColor` ã‚’ä¸Šæ›¸ãã™ã‚‹ã“ã¨ã§å›ºå®šã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚

```kotlin
@Composable
fun SampleButton(
    onClick: () -> Unit,
    modifier: Modifier = Modifier,
    content: @Composable () -> Unit
) {
    CompositionLocalProvider(
        LocalContentColor provides Color.Red // èµ¤è‰²ã«å›ºå®š
    ) {
        Box(
            modifier = modifier.clickable(onClick = onClick)
        ) {
            content()
        }
    }
}
```

ã“ã®ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã«å¯¾ã—ã¦ã€æ–‡å­—è‰²ã‚’æŒ‡å®šã›ãšã«åˆ©ç”¨ã—ãŸå ´åˆã¯æ–‡å­—è‰²ãŒèµ¤è‰²ã«ãªã‚Šã€æ˜ç¤ºçš„ã«æŒ‡å®šã—ãŸå ´åˆã¯ãã®è‰²ã«ãªã‚Šã¾ã™ã€‚

```kotlin
SampleButton(onClick = { /* ... */ }) {
    Text(
        text = "Hello, World"  // èµ¤è‰²
    )
}

SampleButton(onClick = { /* ... */ }) {
    Text(
        color = Color.Blue,
        text = "Hello, World"// é’è‰²
    )
}
```

æ–‡å­—ã‚µã‚¤ã‚ºã‚„`FontWeight`ã‚’æŒ‡å®šã™ã‚‹å ´åˆã¯[ProvideTextStyle](https://developer.android.com/reference/kotlin/androidx/compose/material/package-summary#ProvideTextStyle(androidx.compose.ui.text.TextStyle,kotlin.Function0))ã‚’ä½¿ã†ã“ã¨ãŒã§ãã¾ã™ã€‚

```kotlin
@Composable
fun SampleButton(
    onClick: () -> Unit,
    modifier: Modifier = Modifier,
    content: @Composable () -> Unit
) {
    ProvideTextStyle(
        TextStyle(
            fontSize = 12.sp,
            fontWeight = FontWeight.Bold
        )
    ) {
        Box(
            modifier = modifier.clickable(onClick = onClick)
        ) {
            content()
        }
    }
}
```

ã“ã‚Œã‚‰ã¯ `material` ã®packageã§æä¾›ã•ã‚Œã¦ã„ã‚‹ãŸã‚ã€[BasicText](https://developer.android.com/reference/kotlin/androidx/compose/foundation/text/package-summary?hl=ja#BasicText(kotlin.String,androidx.compose.ui.Modifier,androidx.compose.ui.text.TextStyle,kotlin.Function1,androidx.compose.ui.text.style.TextOverflow,kotlin.Boolean,kotlin.Int))ç­‰ã«ã¯å½±éŸ¿ã—ãªã„ã“ã¨ã«æ³¨æ„ã—ã¦ãã ã•ã„ã€‚

ä»–ã®è¦ç´ ã‚‚ç‹¬è‡ªã«`CompositionLocal`ã‚’é…å¸ƒã™ã‚‹ã“ã¨ã§å…±é€šåŒ–ã‚’ã™ã‚‹ã“ã¨ãŒå¯èƒ½ã§ã™ãŒã€æš—é»™çš„ãªå€¤ã®å—ã‘æ¸¡ã—ã«ãªã‚‹ã®ã§ã€ä¹±ç”¨ã¯æ³¨æ„ã—ãŸã»ã†ãŒè‰¯ã•ãã†ã§ã™ã€‚

* [CompositionLocal ã‚’ä½¿ç”¨ã™ã¹ãã‹ã©ã†ã‹ã®åˆ¤æ–­](https://developer.android.com/jetpack/compose/compositionlocal?hl=ja#deciding)

### æ˜ç¤ºçš„ãªå¼•æ•°ã§å­Composableã«å€¤ã‚’æ¸¡ã™

å¼•æ•°ã§æ¸¡ã•ã‚ŒãŸComposableã«ãƒ‡ãƒ¼ã‚¿ã‚’æ¸¡ã™æ–¹æ³•ã¨ã—ã¦ã€`CompositionLocal`ã‚’ä½¿ã†ä»–ã«ã€æ˜ç¤ºçš„ãªå¼•æ•°ã‚’æ¸¡ã™æ–¹æ³•ãŒã‚ã‚Šã¾ã™ã€‚

```kotlin
@Composable
fun SampleButton(
    onClick: () -> Unit,
    modifier: Modifier = Modifier,
    content: @Composable (contentPadding: PaddingValues) -> Unit
) {
    Box(
        modifier = modifier.clickable(onClick = onClick)
    ) {
        content(PaddingValues(16.dp))
    }
}
```

ä»¥ä¸‹ã®ã‚ˆã†ã«ä½¿ã†ã“ã¨ãŒã§ãã¾ã™ã€‚

```kotlin
SampleButton(onClick = { /* ... */ }) { contentPadding ->
    Text(
        modifier = Modifier
            .background(Color.Red)
            .padding(contentPadding),
        text = "Hello, World"
    )
}
```

Stateã ã‘ã§ãªãã€Composableã‚’æ¸¡ã™ã“ã¨ã‚‚å¯èƒ½ã§ã™ã€‚

```kotlin
fun SampleButton(
    onClick: () -> Unit,
    modifier: Modifier = Modifier,
    content: @Composable (innerContent: @Composable () -> Unit) -> Unit
....
```

åˆ©ç”¨ã‚¤ãƒ¡ãƒ¼ã‚¸ã¯ä»¥ä¸‹ã®ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚
ã‚ã¾ã‚Šã‚„ã‚Šã™ãã‚‹ã¨ç†è§£ãŒé›£ã—ããªã‚‹ã®ã§æ³¨æ„ãŒå¿…è¦ãã†ã§ã™ã€‚

```kotlin
SampleButton(onClick = { /* ... */ }) { innerContent ->
    Box(modifier = Modifier.background(Color.Red)) {
        innerContent()
    }
}
```

[BasicTextField](https://developer.android.com/reference/kotlin/androidx/compose/foundation/text/package-summary#BasicTextField(kotlin.String,kotlin.Function1,androidx.compose.ui.Modifier,kotlin.Boolean,kotlin.Boolean,androidx.compose.ui.text.TextStyle,androidx.compose.foundation.text.KeyboardOptions,androidx.compose.foundation.text.KeyboardActions,kotlin.Boolean,kotlin.Int,androidx.compose.ui.text.input.VisualTransformation,kotlin.Function1,androidx.compose.foundation.interaction.MutableInteractionSource,androidx.compose.ui.graphics.Brush,kotlin.Function1))ã®`decorationBox`ã§ã¯ã“ã®æ–¹æ³•ã§ãƒ•ã‚©ãƒ¼ãƒ ã‚’è£…é£¾ã§ãã‚‹ã‚ˆã†ã«ãªã£ã¦ã„ã¾ã™ã€‚

```kotlin
@Composable
fun BasicTextField(
    value: String?,
    onValueChange: ((String) -> Unit)?,
    /* ... */
    decorationBox: (@Composable (@Composable innerTextField: () -> Unit) -> Unit)? = @Composable { innerTextField -> innerTextField() }
): Unit
```

### ã‚«ã‚¹ã‚¿ãƒ Scopeã‚’ä½œæˆã™ã‚‹

å¼•æ•°ã¨ã—ã¦æ¸¡ã™æ–¹æ³•ã®ä»–ã«ã€[Box](https://developer.android.com/reference/kotlin/androidx/compose/foundation/layout/package-summary#Box(androidx.compose.ui.Modifier,androidx.compose.ui.Alignment,kotlin.Boolean,kotlin.Function1))ã®[BoxScope](https://developer.android.com/reference/kotlin/androidx/compose/foundation/layout/BoxScope)ã®ã‚ˆã†ã«ã€Scopeã¨ã—ã¦æ¸¡ã™æ–¹æ³•ã‚‚è€ƒãˆã‚‰ã‚Œã¾ã™ã€‚

```kotlin
@Composable
fun SampleButton(
    onClick: () -> Unit,
    modifier: Modifier = Modifier,
    content: @Composable SampleButtonScope.() -> Unit
) {
    Box(
        modifier = modifier.clickable(onClick = onClick)
    ) {
        val scope = remember { SampleButtonScope() }
        scope.content()
    }
}

class SampleButtonScope {
    fun Modifier.customWidth(): Modifier {
        return this.width(120.dp)
    }
}
```

ã“ã®ã‚ˆã†ã«ã€åˆ©ç”¨ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚
ãã®ä¸­ã ã‘ã§åˆ©ç”¨ã§ãã‚‹`Modifier`ã‚’å®šç¾©ã™ã‚‹å ´åˆã¯ã“ã¡ã‚‰ãŒè‰¯ã„ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã€‚

```kotlin
SampleButton(onClick = { /* ... */ }) {
    Text(
        modifier = Modifier.customWidth(),
        text = "Hello, World"
    )
}
```


## 4. çŠ¶æ…‹ã¯å¤–éƒ¨ã§ç®¡ç†å¯èƒ½ã«ã™ã‚‹
Jetpack Composeã«ã¯[State Hoisting](https://developer.android.com/jetpack/compose/state#state-hoisting)ã®è€ƒãˆæ–¹ãŒã‚ã‚Šã€å‡ºæ¥ã‚‹é™ã‚ŠçŠ¶æ…‹ã‚’å¤–éƒ¨ã§åˆ¶å¾¡ã§ãã‚‹ã‚ˆã†ã«ã™ã‚‹ã“ã¨ãŒæ¨å¥¨ã•ã‚Œã¦ã„ã¾ã™ã€‚
çŠ¶æ…‹ã‚’å¤–éƒ¨ã‹ã‚‰åˆ¶å¾¡ã™ã‚‹ã“ã¨ãŒã§ãã‚Œã°ã€ãã®UIã¯å®¹æ˜“ã«å†åˆ©ç”¨ã§ãã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚

ä¾‹ãˆã°ã€ãƒ†ã‚­ã‚¹ãƒˆã®å…¥åŠ›ã§ãã‚‹[TextField](https://developer.android.com/reference/kotlin/androidx/compose/material/package-summary?hl=ja#TextField(kotlin.String,kotlin.Function1,androidx.compose.ui.Modifier,kotlin.Boolean,kotlin.Boolean,androidx.compose.ui.text.TextStyle,kotlin.Function0,kotlin.Function0,kotlin.Function0,kotlin.Function0,kotlin.Boolean,androidx.compose.ui.text.input.VisualTransformation,androidx.compose.foundation.text.KeyboardOptions,androidx.compose.foundation.text.KeyboardActions,kotlin.Boolean,kotlin.Int,androidx.compose.foundation.interaction.MutableInteractionSource,androidx.compose.ui.graphics.Shape,androidx.compose.material.TextFieldColors))ãªã©ã‚‚ã€ç¾åœ¨ã®çŠ¶æ…‹ã‚’è¡¨ã™`value`ã¨å¤‰æ›´ã‚’é€šçŸ¥ã™ã‚‹`onValueChange`ã®ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’å—ã‘å–ã‚Šã¾ã™ã€‚
`onValueChange`ã®ã‚¤ãƒ™ãƒ³ãƒˆã«å¿œã˜ã¦`value`ã‚’æ›´æ–°ã—ãªã„é™ã‚Šã€è¡¨ç¤ºã¯å¤‰æ›´ã•ã‚Œã¾ã›ã‚“ã€‚

```kotlin
@Composable
fun TextField(
    value: String?,
    onValueChange: ((String) -> Unit)?,
    modifier: Modifier? = Modifier,
    /* ... */
): Unit
```

`TextField`ã‚’å†…éƒ¨ã§ä½¿ã†ã‚ˆã†ãªç‹¬è‡ªã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚‚ã€åŒæ§˜ã«çŠ¶æ…‹ã‚’å¤–éƒ¨ã§åˆ¶å¾¡ã§ãã‚‹ã‚ˆã†ã«ã—ã¾ã™ã€‚
å†…éƒ¨ã§çŠ¶æ…‹ã‚’ä¿æŒã™ã‚‹ã¨ã€å¸¸ã«ãã‚Œã‚‰ã®åŒæœŸãŒå¿…è¦ã«ãªã‚Šã€ãƒã‚°ãŒæ··å…¥ã™ã‚‹å¯èƒ½æ€§ãŒå¢—åŠ ã—ã¾ã™ã€‚

#### DO ğŸ‘Œ
```kotlin
@Composable
fun EmailTextField(
    email: String,
    onEmailChange: (String) -> Unit,
    modifier: Modifier = Modifier
) {
    TextField(
        value = email,
        onValueChange = onEmailChange,
        modifier = modifier,
        label = { Text("Email") }
    )
}
```

#### Donâ€™t âŒ
```kotlin
@Composable
fun EmailTextField(
    onEmailChange: (String) -> Unit,
    modifier: Modifier = Modifier
) {
    var email by remember { mutableStateOf("") }
    TextField(
        value = email,
        onValueChange = {
            email = it
            onEmailChange(it)
        },
        modifier = modifier,
        label = { Text("Email") }
    )
}
```

### ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«å¯èƒ½ãªã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
Jetpack Composeã«ãŠã„ã¦ã€ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ä½ç½®ã¯[ScrollState](https://developer.android.com/reference/kotlin/androidx/compose/foundation/ScrollState?hl=ja)ã«ã¦ç®¡ç†ã‚’è¡Œã„ã¾ã™ã€‚

ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«å¯èƒ½ãªã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’ä½œæˆã™ã‚‹å ´åˆã€`ScrollState`ã‚’å¼•æ•°ã¨ã—ã¦å—ã‘å–ã‚‹ã“ã¨ã«ã‚ˆã‚Šã€å¤–éƒ¨ã‹ã‚‰ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ä½ç½®ã‚’ç›£è¦–ã—ãŸã‚Šã€åˆ¶å¾¡ã™ã‚‹ã“ã¨ãŒå¯èƒ½ã«ãªã‚Šã¾ã™ã€‚

ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå¼•æ•°ã§ `rememberScrollState` ã‚’æŒ‡å®šã—ã¦ãŠãã“ã¨ã§ã€åˆ¶å¾¡ã‚„ç›£è¦–ã®å¿…è¦ãŒãªã„å ´åˆã¯ã€æŒ‡å®šã›ãšã«ä½¿ã†ã“ã¨ã‚‚ã§ãã¾ã™ã€‚

ãã®ä»–ã®Stateã‚‚ã€å‡ºæ¥ã‚‹é™ã‚Šå¤–éƒ¨ã‹ã‚‰ç®¡ç†å¯èƒ½ãªå½¢ã«ã™ã‚‹ã“ã¨ãŒè‰¯ã„ã§ã—ã‚‡ã†ã€‚

#### DO ğŸ‘Œ
```kotlin
@Composable
fun EmailTextField(
    modifier: Modifier = Modifier,
    scrollState: ScrollState = rememberScrollState()
) {
    Column(
        modifier = modifier.verticalScroll(scrollState)
    ) {
        /* ... */
    }
}
```

#### Donâ€™t âŒ
```kotlin
@Composable
@Composable
fun EmailTextField(
    modifier: Modifier = Modifier
) {
    Column(
        modifier = modifier.verticalScroll(rememberScrollState())
    ) {
        /* ... */
    }
}
```

### ã‚«ã‚¹ã‚¿ãƒ Stateã‚’ä½œã‚‹

è¤‡é›‘ãªã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’ä½œæˆã™ã‚‹å ´åˆã€ç‹¬è‡ªã§Stateã‚’ç”¨æ„ã™ã‚‹ã®ãŒè‰¯ã„ã§ã—ã‚‡ã†ã€‚

ä¾‹ãˆã°ã€é–‹é–‰ãŒå‡ºæ¥ã‚‹ã‚¢ã‚³ãƒ¼ãƒ‡ã‚£ã‚ªãƒ³ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã®UIã‚’è€ƒãˆã¾ã™ã€‚

ä»¥ä¸‹ã®ã‚ˆã†ãªStateã‚’ä½œæˆã—ã€ãã‚Œã‚’å¼•æ•°ã«å—ã‘å–ã‚‹ã‚ˆã†ã«ã—ã¾ã™ã€‚

```kotlin
@Stable
class AccordionState {
    var expanded by mutableStateOf(false)
        private set

    fun toggle() {
        if (expanded) {
            collapsed()
        } else {
            expand()
        }
    }

    fun expand() {
        expanded = true
    }

    fun collapsed() {
        expanded = false
    }
}
```

```kotlin
@Composable
fun Accordion(
   modifier: Modifier = Modifier,
   state: AccordionState = remember { AccordionState() }
) {
    Column(
        modifier = modifier
    ) {
        Text(
            modifier = Modifier
                .fillMaxWidth()
                .clickable(onClick = { state.toggle() }),
            text = "Headerâ€
        )
        if (state. expanded) {
             Text(text = "Content")
        }
    }
}
```

state classå†…ã§æ‰±ã†çŠ¶æ…‹ã‚‚ã€[State](https://developer.android.com/reference/kotlin/androidx/compose/runtime/State?hl=ja)ã‚’ä½¿ã„ã€å¸¸ã«Composeã«é€šçŸ¥ã•ã‚Œã‚‹ã•ã‚Œã‚‹ã‚ˆã†ã«ã—ã¾ã™ã€‚

ã¾ãŸã€`Stable`ã‚¢ãƒãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ã‚’ä»˜ã‘ã¦ãŠãã“ã¨ã§ã€ä¸è¦ãªrecomposeã‚’æŠ‘åˆ¶ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚

* [ã‚³ãƒ³ãƒãƒ¼ã‚¶ãƒ–ãƒ«ã®ãƒ©ã‚¤ãƒ•ã‚µã‚¤ã‚¯ãƒ« - å…¥åŠ›ãŒå¤‰åŒ–ã—ã¦ã„ãªã„å ´åˆã«ã‚¹ã‚­ãƒƒãƒ—ã™ã‚‹](https://developer.android.com/jetpack/compose/lifecycle#skipping)

`ScrollState` ã¨åŒæ§˜ã«ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå¼•æ•°ã‚’æŒ‡å®šã—ã¦ãŠãã“ã¨ã§ã€å‘¼ã³å‡ºã—å´ã§åˆ¶å¾¡ã—ãªã„å ´åˆã¯æ„è­˜ã›ãšã«ä½¿ã†ã“ã¨ãŒã§ãã¾ã™ã€‚

ç”»é¢å›è»¢æ™‚ç­‰ã«çŠ¶æ…‹ã‚’ç¶­æŒã—ãŸã„å ´åˆã¯[Saver](https://developer.android.com/reference/kotlin/androidx/compose/runtime/saveable/Saver)ã‚’å®Ÿè£…ã—ã€[rememberSaveable](https://developer.android.com/reference/kotlin/androidx/compose/runtime/saveable/package-summary#rememberSaveable(kotlin.Array,androidx.compose.runtime.saveable.Saver,kotlin.String,kotlin.Function0))ã‚’ä½¿ã†å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚

## ã¾ã¨ã‚
Jetpack Composeã§UIã‚’å†åˆ©ç”¨ã™ã‚‹ãŸã‚ã®æ³¨æ„äº‹é …ã«ã¤ã„ã¦ç´¹ä»‹ã—ã¦ãã¾ã—ãŸã€‚

å†åˆ©ç”¨å¯èƒ½ã«ã™ã‚‹ãŸã‚ã«ã€æ±ç”¨çš„ã«ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’ä½œæˆã™ã‚‹ã“ã¨ã¯é‡è¦ã§ã™ãŒã€ãã‚Œã«ã‚ˆã£ã¦ä¸å¿…è¦ãªè€ƒæ…®ã‚’ã—éããªã„ã‚ˆã†ã«æ°—ã‚’ã¤ã‘ã¦ãã ã•ã„ã€‚ï¼ˆYAGNIã®åŸå‰‡ï¼‰

ä»Šå›ã®è¨˜äº‹ã‚‚å‚è€ƒã«ã—ã¤ã¤ã€ãœã²Jetpack Composeã§åŠ¹ç‡çš„ãªUIæ§‹ç¯‰ã‚’å®Ÿç¾ã—ã¦ã»ã—ã„ã¨è€ƒãˆã¦ã„ã¾ã™ã€‚