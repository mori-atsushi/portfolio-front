---
title: '2020年のAndroidアプリ開発の変化を振り返る'
description: '2020年ももうすぐ終わりですね。\n今年は本当に激動の1年でした。\nAndroidアプリ開発においても、1年経てば色々と環境が変わってきます。\n今年出た技術や注目された技術について、私なりの視点で解説していきたいと思います。'
pubDate: '2020-12-27T06:00:00.000Z'
ogpImage: 'https://cdn.at-sushi.work/temp/2020-12-27-ogp.png'
---

2020年ももうすぐ終わりですね。

今年は本当に激動の1年でした。

Androidアプリ開発においても、1年経てば色々と環境が変わってきます。

今年出た技術や注目された技術について、私なりの視点で解説していきたいと思います。

## Kotlin
![](https://cdn.at-sushi.work/temp/2020-12-27-1.png)

Android開発においてもはや欠かせなくなっているのがKotlinですね。

2020年は[Kotlin 1.4](mance-ja/)もリリースされ、より一層、安定性とパフォーマンスが向上しました。
Kotlin Coroutines
[SAM変換](mance-ja/)や[末尾コンマ](https://kotlinlang.org/docs/reference/whatsnew14.html#trailing-comma)等の新しい機能についても、記憶に新しいと思います。

今後の発展にも注目です。

### Kotlin Coroutines
Kotlin Coroutinesは特に[Flow](https://kotlin.github.io/kotlinx.coroutines/kotlinx-coroutines-core/kotlinx.coroutines.flow/-flow/)の変更が激しい1年でした。

今までホットストリームは[Channel](https://kotlinlang.org/docs/reference/coroutines/channels.html)、コールドストリームは[Flow](https://kotlin.github.io/kotlinx.coroutines/kotlinx-coroutines-core/kotlinx.coroutines.flow/-flow/)といった使い分けでしたが、ホットストリームである[StateFlow](https://kotlin.github.io/kotlinx.coroutines/kotlinx-coroutines-core/kotlinx.coroutines.flow/-state-flow/)と[SharedFlow](https://kotlin.github.io/kotlinx.coroutines/kotlinx-coroutines-core/kotlinx.coroutines.flow/-shared-flow/)が登場し、一気に書き方が変わりました。

また、今までホットストリームで使っていた[BroadcastChannel](https://kotlin.github.io/kotlinx.coroutines/kotlinx-coroutines-core/kotlinx.coroutines.channels/-broadcast-channel/)と[ConflatedBroadcastChannel](https://kotlin.github.io/kotlinx.coroutines/kotlinx-coroutines-core/kotlinx.coroutines.channels/-conflated-broadcast-channel/index.html)は非推奨になることが決まっているようです。

個人的には、合わせて登場となった、ストリームの共有を行うための[stateIn](https://kotlin.github.io/kotlinx.coroutines/kotlinx-coroutines-core/kotlinx.coroutines.flow/state-in.html), [shareIn](https://kotlin.github.io/kotlinx.coroutines/kotlinx-coroutines-core/kotlinx.coroutines.flow/share-in.html)が熱いなと思っています。

詳しくは以下の記事にまとめてあります。

* [Kotlin CoroutinesのFlow, SharedFlow, StateFlowを整理する](https://at-sushi.work/blog/24)
* [SharedFlowの深堀り、replay, bufferって何【Kotlin Coroutines flow】](https://at-sushi.work/blog/25) 
* [StateFlowの深堀り、SharedFlowとの違いとstateIn【Kotlin Coroutines flow】](https://at-sushi.work/blog/27) 

また、Android Jetpackのライブラリも続々とKotlin Coroutinesの対応をしており、Android開発において広く取り入れられるようになってきました。

Android Jetpackに関してはまた後で取り上げます。

### Kotlin Multiplatform (Kotlin Multiplatform Mobile)

![](https://cdn.at-sushi.work/temp/2020-12-27-2.png)

Kotlin Multiplatformの話題もより一層盛り上がってきました。

今年は、[Kotlin Multiplatform Mobile(KMM)](https://blog.jetbrains.com/ja/kotlin/2020/09/kotlin-multiplatform-mobile-goes-alpha-ja/)という名前で、新しいSDKがalpha版で提供され始めました。

以前からも行われていた、AndroidとiOSのビジネスロジックだけ共通し、UI部分は各々で書くという手法を、公式がサポートし始めた形となります。

また、Netflixを始めとしてプロダクションでの採用報告が目立った年でもありました。

* [Netflix Android and iOS Studio Apps — now powered by Kotlin Multiplatform | by Netflix Technology Blog | Oct, 2020 | Netflix TechBlog](https://netflixtechblog.com/netflix-android-and-ios-studio-apps-kotlin-multiplatform-d6d4d8d25d23)
* [React Nativeをやめる話とKotlin Multiplatform | Wantedly Engineer Blog](https://www.wantedly.com/companies/wantedly/post_articles/282562)
* [Kotlin Multiplatform Projectを使ってAndroidとiOSのログ送信部分を共通化した - エムスリーテックブログ](https://www.m3tech.blog/entry/2020/06/03/103015)
* [Kotlin Multiplatform Projectを導入してみて | CodingFeline](https://www.yslibrary.net/2020/12/26/review-kmp-in-production/)

純粋なコードの記述量が減るだけでなく、iOS / Androidの予期せぬロジック差分を減らせるというところが魅了的に感じます。

## Android Jetpack

![](https://cdn.at-sushi.work/temp/2020-12-27-3.png)

[Android Jetpack](https://developer.android.com/jetpack?hl=ja)はAndroidアプリ開発向けのサポートライブラリ群ですが、今年も様々な進化を遂げました。

気になったものをピックアップして紹介します。

### Jetpack Compose

![](https://cdn.at-sushi.work/temp/2020-12-27-4.png)

今年大注目のJetpackライブラリといえば[Jetpack Compose](https://developer.android.com/jetpack/compose)でしょう。

発表自体は2019年でしたが、この1年でかなり進化したように思います。

Jetpack ComposeはAndroidの新しいUI構築のためのツールキットで、[SwiftUI](https://developer.apple.com/jp/xcode/swiftui/)、[React](https://ja.reactjs.org/)、[Flutter](https://flutter.dev/)等と同じように、宣言的に記述することができます。

まだalpha版ですが、2021年はさらに飛躍するのではないかと思って見ています。

### Paging 3
[Paging 3](https://developer.android.com/topic/libraries/architecture/paging/v3-overview)も今年追加されたライブラリの一つです。

意外と煩雑になりがちなページングの処理を支援してくれます。

Kotlin Coroutinesを全面的に利用しており、Flowにも対応しているのが印象的でした。

こちらもまだalpha版になっています。

### DataStore
こちらも追加されて驚いたライブラリ、[DataStore](https://developer.android.com/topic/libraries/architecture/datastore)です。

[SharedPreferences](https://developer.android.com/reference/android/content/SharedPreferences)のいくつかの問題を解決するため、代替として登場しました。

[Flow](https://kotlin.github.io/kotlinx.coroutines/kotlinx-coroutines-core/kotlinx.coroutines.flow/-flow/) に対応していたり、[protobuf](https://developers.google.com/protocol-buffers/docs/proto3) でデータの形式を記述できたりと、非常に驚きの多いライブラリでした。

こちらもまたまたalpha版ですが、慣れ親しんだSharedPreferencesにお別れを告げる日は、そう遠くないかもしれません。

### Dagger Hilt
今年公開されたもののうち、反響が大きかった一つは[Dagger Hilt](https://developer.android.com/training/dependency-injection/hilt-android?hl=ja)だと思います。

DI Containerとしてデファクトではあるものの、若干とっつきにくかった[Dagger](https://github.com/google/dagger)が、アノテーション等によって書きやすくなっているようです。

個人的には、Daggerを使いこなせず、[koin](https://github.com/InsertKoinIO/koin)を愛用しているのですが、Dagger Hiltはかなり注目しています。

こちらもまだalpha版です。

### App Startup
もう一つ、今年新たにAndroid Jetpackに参戦してきたのが、[App Startup](https://developer.android.com/topic/libraries/app-startup)です。

アプリの起動時の初期化処理を支援してくれます。

こちらは、すでにstableになっています。


### Activity / Fragment
[Activity 1.2.0-alpha02](https://developer.android.com/jetpack/androidx/releases/activity#1.2.0-alpha02)と[Fragment 1.3.0-alpha02](https://developer.android.com/jetpack/androidx/releases/fragment#1.3.0-alpha02)から、新しいActivity Result APIが追加されました。

API level 1からある、慣れ親しんだ[onActivityResult](https://developer.android.com/reference/android/app/Activity)は非推奨となったため、注意が必要です。

詳しくはこちらから確認してみてください。

* [アクティビティからの結果の取得 | Android デベロッパー | Android Developers](https://developer.android.com/training/basics/intents/result?hl=ja)

### ViewBinding
[DataBinding](https://developer.android.com/topic/libraries/data-binding?hl=ja)の弟分のような[VIewBinding](https://developer.android.com/topic/libraries/view-binding)が、今年[Android Studio 3.6](https://developer.android.com/studio/releases?hl=ja#3-6-0)でstableとなりました。

`DataBinding` より機能は少なく、その分軽量に動くようになっています。

一方で、Kotlin Android Extensionsによるviewの参照は [Kotlin 1.4.20](https://blog.jetbrains.com/kotlin/2020/11/kotlin-1-4-20-released/) にて非推奨になりました。

* [Google Developers Japan: Kotlin Android Extensions の未来](https://developers-jp.googleblog.com/2020/11/the-future-of-kotlin-android-extensions.html)

もし使っていれば、これからはDataBindingもしくはViewBindingに乗り換える必要があります。

私の書いたこちらの記事も参考にしてみてください。

* [Kotlin Android Extensions(views)はやめてViewBindingを使おう](https://at-sushi.work/blog/19)

### MotionLayout
[MotionLayout](https://developer.android.com/training/constraint-layout/motionlayout?hl=ja)はアニメーションやモーションをxmlで管理できるものです。

発表自体は2018年のGoogle I/Oですが、2020年になって[ConstraintLayout 2.0](https://developer.android.com/jetpack/androidx/releases/constraintlayout#2.0.0)でようやくstableになりました。

複雑な動きも比較的シンプルに記述することができます。

様々なサンプルも用意されているので、ぜひ一度覗いてみてください。

* [MotionLayout の例 | Android デベロッパー | Android Developers](https://developer.android.com/training/constraint-layout/motionlayout/examples?hl=ja)

## Android 11

![](https://cdn.at-sushi.work/temp/2020-12-27-5.png)

毎年、Androidの新しいOSが発表されます。

今年も様々な新しい機能と安全性が向上した、[Android 11](https://www.android.com/intl/ja_jp/android-11/)が公開されました。

開発者目線で、Android 11で変わったところをさらっとおさらいしたいと思います。

### プライバシー
Android 11ではプライバシーの保護の強化が行われています。

特に権限取得周りの変更が激しく、 `1回のみのアクセス許可` や `長期間アプリを利用しなかったときの権限自動リセット` 等が追加されており、もし権限取得の情報を永続化してる場合は対応が必要となります。

他にもいくつか変更があるため、詳しくはこちらをご覧ください。

* [Android 11 におけるプライバシー | Android デベロッパー | Android Developers](https://developer.android.com/about/versions/11/privacy?hl=ja)

### メディア コントロール

![](https://cdn.at-sushi.work/temp/2020-12-27-7.png)

新しい[メディア コントロール](https://developer.android.com/guide/topics/media/media-controls?hl=ja)のUIが追加されました。

動画や音楽の操作を通知欄から行うことができ、また最後に再生したものを再開することもできます。

### WindowInsetsの変更
ソフトウェアキーボードや、ステータスバー、ナビゲーションバー周りの操作が一新されました。

ステータスバーやナビゲーションバーの高さを取得するための、[WindowInsets.getSystemWindowInsets()](https://developer.android.com/reference/android/view/WindowInsets) やフルスクリーンモード等を開始するための[View.setSystemUiVisibility](https://developer.android.com/reference/android/view/View?hl=ja)が非推奨となり、[WindowInsets.Type](https://developer.android.com/reference/android/view/WindowInsets.Type)や[WindowInsetsController](https://developer.android.com/reference/android/view/WindowInsetsController?hl=ja)が追加されています。

Android 9頃から話題になっているedge-to-edgeの対応等が、かなり書き方が変わるので注意が必要です。

また、今までずっとできなかった、ソフトウェアキーボードのアニメーションの動きを検知し、UIと同期させることができるようになりました。

このあたりの説明は、この記事が詳しそうです。

* [Animating your keyboard (part 1). New WindowInsets APIs for checking the… | by Chris Banes | Android Developers | Medium](https://medium.com/androiddevelopers/animating-your-keyboard-fb776a8fb66d)

## Google Play
毎年、厳しい変更要求をしてくるGoogle Playですが、今年もいくつか変更があります。

ちょっとだけ紹介します。

### In-App Review API

![](https://cdn.at-sushi.work/temp/2020-12-27-8.png)

アプリ内でPlayストアに評価やレビューの送信を促すことができるようになりました。

詳しくはこちらを御覧ください。

* [Google Play In-App Review API | Android デベロッパー | Android Developers](https://developer.android.com/guide/playcore/in-app-review?hl=ja)

### 定期購読の変更
Account HoldとRestoreが必須になったり、ResubscribeとPaused Subscriptionsの機能が追加されました。

この記事が一番わかりやすかったです。

* [【2020年版】Play Commerceアップデート対応. こんにちは、@syarihuです。 | by Taichi Sato (syarihu) | Medium](https://medium.com/@syarihu/2020%E5%B9%B4%E7%89%88-play-commerce%E3%82%A2%E3%83%83%E3%83%97%E3%83%87%E3%83%BC%E3%83%88%E5%AF%BE%E5%BF%9C-682716d240fd)

## その他ライブラリ
その他のライブラリで気になったものを紹介します。

### coil

![](https://cdn.at-sushi.work/temp/2020-12-27-6.png)

今まで画像表示のためのライブラリとしては、[glide](https://github.com/bumptech/glide)か[picasso](https://github.com/square/picasso)を選択することが多かったように思います。

2020年には、kotlin製の画像表示用のライブラリ、[coil](https://github.com/coil-kt/coil)がstableになりました。

CoilはKotlin Coroutinesで実装されており、高速かつ軽量なのが特徴です。

少し使っただけですが、インターフェースも使いやすいように感じました。

ぜひ選択肢の一つにしてみてください。

### Store 4
Dropboxが作成している、状態管理用のライブラリがKotlin Coroutinesで書き直され、[Store 4](https://github.com/dropbox/Store)として再登場しました。

ネットワークやDBのデータのフェッチや共有、キャッシングを支援してくれます。

私自身は使ったことはないですが、評価の高いライブラリのようです。

### Turbine
[Turbine](https://github.com/cashapp/turbine)はKotlin CoroutinesのFlow用のテストライブラリです。

私は自作のutilを使ってテストをしていますが、Flowをよく使っているプロジェクトでは採用してみても良いかもしれません。

* 自作utilの紹介: [Kotlin Coroutines flowのテストを快適に書く](https://at-sushi.work/blog/20)

### Pokedex
こちらはライブラリではないですが、ここで紹介しておきます。

[Pokedex](https://github.com/skydoves/Pokedex)は様々な最新ライブラリを活用したMVVMのAndroidサンプルアプリケーションです。

上記のDagger HiltからRoom、Kotlin Coroutines Flow等、今Androidアプリを開発する上では外せない様々な要素を学ぶことができます。

## まとめ
かなり駆け足になりましたが、今年もAndroidの開発環境は激しく進化していることがわかりました。

2020年の前半にあった出来事で、もう忘れていたものもあったのではないでしょうか。

個人的には、2021年はJetpack Composeがかなり来るのではないかと思っています。

もちろん、Kotlin Multiplatform Mobileからも目が離せません。

また今回は紹介しませんでしたが、Flutterもますます勢いを増してくると思っています。

それでは皆さん、良いお年を！


**参考**
* [Android Dagashi](https://androiddagashi.github.io/)
* [2020年のAndroidアプリ開発を振り返ろう - Qiita](https://qiita.com/Nabe1216/items/865d5c7c14077d00e797)